<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta http-equiv=accept-ch content="DPR, Viewport-Width, Width"><link rel=icon href=/favicon/favicon.ico type=image/gif><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" media=print onload='this.media="all"'><noscript><link href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel=stylesheet></noscript><link rel=stylesheet href=/css/font.css media=all><script async src="https://www.googletagmanager.com/gtag/js?id=G-6Z99Z4T0L0"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6Z99Z4T0L0",{anonymize_ip:!1})}</script><meta property="og:title" content="Backend System Design"><meta property="og:description" content="Building the backend infrastructure for our Valorant data-driven website, I encountered several unique challenges and oppurtunities to grow as a software developer. In this post, I&rsquo;ll outline our current implementations and the ongoing developments for our backend system design.
Pipeline with Kafka In our quest to build an advanced and reliable infrastructure, Kafka became a cornerstone of our design. The integration effectively separates our crawler from our statistical calculation components, aiming for a system that remains robust, especially when it faces potential computational challenges."><meta property="og:type" content="article"><meta property="og:url" content="https://jooncode.com/blog/code/backend/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-08-29T00:00:00+00:00"><meta property="article:modified_time" content="2023-08-29T00:00:00+00:00"><meta property="og:site_name" content="Joon Career"><meta name=twitter:card content="summary"><meta name=twitter:title content="Backend System Design"><meta name=twitter:description content="Building the backend infrastructure for our Valorant data-driven website, I encountered several unique challenges and oppurtunities to grow as a software developer. In this post, I&rsquo;ll outline our current implementations and the ongoing developments for our backend system design.
Pipeline with Kafka In our quest to build an advanced and reliable infrastructure, Kafka became a cornerstone of our design. The integration effectively separates our crawler from our statistical calculation components, aiming for a system that remains robust, especially when it faces potential computational challenges."><link rel=stylesheet href=/bootstrap-5/css/bootstrap.min.css media=all><link rel=stylesheet href=/css/header.css media=all><link rel=stylesheet href=/css/footer.css media=all><link rel=stylesheet href=/css/theme.css media=all><style>:root{--text-color:#343a40;--text-secondary-color:#6c757d;--background-color:#eaedf0;--secondary-background-color:#64ffda1a;--primary-color:#007bff;--secondary-color:#f8f9fa;--text-color-dark:#e4e6eb;--text-secondary-color-dark:#b0b3b8;--background-color-dark:#18191a;--secondary-background-color-dark:#212529;--primary-color-dark:#ffffff;--secondary-color-dark:#212529}body{font-size:1.2rem;font-weight:400;line-height:1.5;text-align:left}html{background-color:var(--background-color)!important}body::-webkit-scrollbar{width:.5em;height:.5em;background-color:var(--background-color)}::-webkit-scrollbar-track{box-shadow:inset 0 0 6px var(--background-color);border-radius:1rem}::-webkit-scrollbar-thumb{border-radius:1rem;background-color:var(--secondary-color);outline:1px solid var(--background-color)}#search-content::-webkit-scrollbar{width:.5em;height:.1em;background-color:var(--background-color)}</style><meta name=description content><link rel=stylesheet href=/css/single.css><script defer src=/fontawesome-5/all-5.15.4.js></script><title>Backend System Design | Joon Career</title></head><body class=light><script>let localStorageValue=localStorage.getItem("pref-theme"),mediaQuery=window.matchMedia("(prefers-color-scheme: dark)").matches;switch(localStorageValue){case"dark":document.body.classList.add("dark");break;case"light":document.body.classList.remove("dark");break;default:mediaQuery&&document.body.classList.add("dark");break}</script><header><nav class="pt-3 navbar navbar-expand-lg animate"><div class="container-fluid mx-xs-2 mx-sm-5 mx-md-5 mx-lg-5"><a class="navbar-brand primary-font text-wrap" href=/><img src=/favicon/favicon.ico width=30 height=30 class="d-inline-block align-top">
00N</a><div><input id=search autocomplete=off class="form-control mr-sm-2 d-none d-md-block" placeholder='Ctrl + k to Search...' aria-label=Search oninput=searchOnChange(event)></div><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarContent aria-controls=navbarContent aria-expanded=false aria-label="Toggle navigation"><svg aria-hidden="true" height="24" viewBox="0 0 16 16" width="24" data-view-component="true"><path fill-rule="evenodd" d="M1 2.75A.75.75.0 011.75 2h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 2.75zm0 5A.75.75.0 011.75 7h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 7.75zM1.75 12a.75.75.0 100 1.5h12.5a.75.75.0 100-1.5H1.75z"/></svg></button><div class="collapse navbar-collapse text-wrap primary-font" id=navbarContent><ul class="navbar-nav ms-auto text-center"><li class="nav-item navbar-text d-block d-md-none"><div class=nav-link><input id=search autocomplete=off class="form-control mr-sm-2" placeholder='Ctrl + k to Search...' aria-label=Search oninput=searchOnChange(event)></div></li><li class="nav-item navbar-text"><a class=nav-link href=/#about aria-label=about>About Me</a></li><li class="nav-item navbar-text"><a class=nav-link href=/blog title=blog>Blog</a></li><li class="nav-item navbar-text"><div class=text-center><button id=theme-toggle><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></li></ul></div></div></nav></header><div id=content><section id=single><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-md-12 col-lg-9"><div class=pr-lg-4><div class="title mb-5"><h1 class="text-center mb-4">Backend System Design</h1><div class=text-center>HwiJoon Lee
<small>|</small>
Aug 29, 2023
<span id=readingTime>min read</span></div></div><div class=featured-image><img class=img-fluid src=/posts/Dev/backend.png alt="Backend System Design"></div><article class="page-content p-2"><p>Building the backend infrastructure for our Valorant data-driven website, I encountered several unique challenges and oppurtunities to grow as a software developer. In this post, I&rsquo;ll outline our current implementations and the ongoing developments for our backend system design.</p><h2 id=pipeline-with-kafka>Pipeline with Kafka</h2><p>In our quest to build an advanced and reliable infrastructure, Kafka became a cornerstone of our design. The integration effectively separates our crawler from our statistical calculation components, aiming for a system that remains robust, especially when it faces potential computational challenges.</p><p><img src=/posts/Dev/MongoStruct.png alt=MongoDB></p><p><a href=https://jooncode.com/blog/code/crawler/><em><strong>Our match crawler system</strong></em></a> extracts Valorant game data, which undergoes a multiple parsing mechanism to reduce document size. This parsed data is stored in MongoDB. When a match is stored, a Kafka producer dispatches these match details to a designated topics.</p><h3 id=data-processing>Data Processing</h3><p><img src=/posts/Dev/dataProcessing.png alt=MongoDB></p><p>Kafka consumers retrieve match id from the topic and initiate necessary calculations with the parsed data in our database. Some calculations might be straightforward and quick, while others could demand more computation.</p><h3 id=balancing-workloads>Balancing Workloads</h3><p><img src=/posts/Dev/balance.jpeg alt=MongoDB></p><p>Kafka&rsquo;s design allows for flexibility in managing computational demands. If a consumer faces a heavier workload, we can easily introduce additional consumers to that consumer group. This adaptive scaling ensures a more evenly distributed processing speed to optimize our system&rsquo;s efficiency. Additionally, we will be able to leverage consumer offsets to check the overall computing progresses. If there&rsquo;s a noticeable gaps in offsets between consumers, they indicate the potential processing bottlenecks to be addressed.</p><h3 id=parallelism--scalability>Parallelism & Scalability</h3><p>Kafka, by design, is the best for parallel data processing. This inherent trait ensures both scalability and concurrent processing for us. Even if faced with diverse data computation demands, our system remains agile and responsive.</p><h2 id=api-with-nestjs>API with NestJs</h2><p><img src=/posts/Dev/PSQL.png alt=PSQL.jpg></p><p>Choosing the appropriate framework can greatly influence the trajectory of a project. NestJS offers us a defined set of rules and structure. It streamlines our processes by ensuring there&rsquo;s a consistent pattern we can use across different modules. This foundation becomes invaluable as projects grows, guaranteeing that the architecture remains consistent.</p><h3 id=studying-entity-relationships>Studying Entity Relationships</h3><p><img src=/posts/Valorant/agentWinrate.jpeg alt=agentWinrate></p><p>One of the core lessons revolved around constructing relationships for entities. For instance, my task for main page was to present statistics of every Agent at four different positions across all maps on our main page. This demanded a solid understanding about the complex business logic. While building this feature, I learned how to come up with precise entity Columns and relations to create an ideal output for frontend developer and validate APIs with swagger.</p><p><img src=/posts/Dev/swagger.png alt=swagger.png></p><h3 id=more-nestjs-features>More NestJS Features</h3><p>NestJs required me to familiarize myself with features beyond the basics. Specifically, Exception Filters, Interceptors, and Guards came to the fore. Each added functionality and security layers, critical for robust application development. I&rsquo;ll be diving deeper into their specific implications and use-cases in future technical discussions.</p><h2 id=full-structure>Full Structure</h2><p><img src=/posts/Dev/backendSummary.png alt=backendSummary></p><p>Our backend architecture differentiates between data storage and serving mechanisms, with MongoDB primarily handling unprocessed data storage and PSQL dedicated to serving client requests. To ensure seamless data transition between these systems, we employ regular cron jobs for consistent synchronization from MongoDB to PSQL. This weak coupling not only ensures that clients consistently access the most up-to-date data but also provides the flexibility to scale each component.</p><h2 id=collaborating-using-postman>Collaborating Using Postman</h2><p>During the system&rsquo;s development phase, the need for rapid API prototyping became evident. Postman, with its capabilities for quick API endpoint testing, proved invaluable for iterative development. Recognizing the importance of alignment between frontend and backend development, we introduced a standardized JSON format specifically for the main page.</p><p><img src=/posts/Dev/PostmanStruct.png alt=PostmanStruct></p><p>This served as a clear contract for both teams. With such a format in place, frontend developers could simulate data interactions, allowing them to proceed with UI/UX development in parallel with API development. This collaborative approach will accelerate our overall project timeline.</p><p><img src=/posts/Dev/postmanUsage.png alt=postmanUsage></p><h2 id=conclusion>Conclusion</h2><p>This project has provided me a comprehensive look into the complexities of our backend infrastructure and the nuances of the development. While I spearheaded most development and game research, our CTO&rsquo;s guidance was instrumental in refining our approaches and ensuring we stayed on the right track. I am learning a lot from our team, and I am glad to be able to work with them. I&rsquo;ll be elaboring more useful insights in my later posts soon. Stay tuned for more insights and technical breakdowns!</p></article></div></div><div class="col-sm-12 col-md-12 col-lg-3"><div class=sticky-sidebar><aside class=toc><h5>Table Of Contents</h5><div class=toc-content><nav id=TableOfContents><ul><li><a href=#pipeline-with-kafka>Pipeline with Kafka</a><ul><li><a href=#data-processing>Data Processing</a></li><li><a href=#balancing-workloads>Balancing Workloads</a></li><li><a href=#parallelism--scalability>Parallelism & Scalability</a></li></ul></li><li><a href=#api-with-nestjs>API with NestJs</a><ul><li><a href=#studying-entity-relationships>Studying Entity Relationships</a></li><li><a href=#more-nestjs-features>More NestJS Features</a></li></ul></li><li><a href=#full-structure>Full Structure</a></li><li><a href=#collaborating-using-postman>Collaborating Using Postman</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></aside><aside class=tags><h5>Tags</h5><ul class="tags-ul list-unstyled list-inline"><li class=list-inline-item><a href=https://jooncode.com/tags/backend target=_blank>Backend</a></li><li class=list-inline-item><a href=https://jooncode.com/tags/postgresql target=_blank>Postgresql</a></li><li class=list-inline-item><a href=https://jooncode.com/tags/mongodb target=_blank>MongoDB</a></li><li class=list-inline-item><a href=https://jooncode.com/tags/nestjs target=_blank>NestJS</a></li></ul></aside></div></div></div><div class=row><div class="col-sm-12 col-md-12 col-lg-9 p-4"></div></div></div><button class="p-2 px-3" onclick=topFunction() id=topScroll>
<i class="fas fa-angle-up"></i></button></section><div class=progress><div id=scroll-progress-bar class=progress-bar role=progressbar aria-valuenow=0 aria-valuemin=0 aria-valuemax=100></div></div><script src=/js/scrollProgressBar.js></script>
<script>var topScroll=document.getElementById("topScroll");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?topScroll.style.display="block":topScroll.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=/js/readingTime.js></script><footer><div class="container py-3" id=recent-posts><div class="h3 text-center text-secondary py-3">Recent Posts</div><div class="row justify-content-center"><div class="col-lg-4 col-md-6 pt-2"><div class="card h-100"><div class=card-header><a href=/blog/game/enhancedmetrics/><img src=/posts/Valorant/cypher.jpeg class=card-img-top alt="Enhanced Valorant Metrics"></a></div><div class="card-body bg-transparent p-3 shadow-sm"><a href=/blog/game/enhancedmetrics/ class="primary-font card-title"><h5 class="card-title bg-transparent" title="Enhanced Valorant Metrics">Enhanced Valorant Metrics</h5></a><div class="card-text secondary-font"><p>Agent-Based Rating In combat score systems, metrics such as damage per point, kill points based on remaining enemies, multi-kills, and assists offer a general overview of players’ combat …</p></div></div><div class="mt-auto card-footer"><span class=float-start>Oct 5, 2023</span>
<a href=/blog/game/enhancedmetrics/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div><div class="col-lg-4 col-md-6 pt-2"><div class="card h-100"><div class=card-header><a href=/blog/code/backend/><img src=/posts/Dev/backend.png class=card-img-top alt="Backend System Design"></a></div><div class="card-body bg-transparent p-3 shadow-sm"><a href=/blog/code/backend/ class="primary-font card-title"><h5 class="card-title bg-transparent" title="Backend System Design">Backend System Design</h5></a><div class="card-text secondary-font"><p>Building the backend infrastructure for our Valorant data-driven website, I encountered several unique challenges and oppurtunities to grow as a software developer. In this post, I&rsquo;ll outline …</p></div></div><div class="mt-auto card-footer"><span class=float-start>Aug 29, 2023</span>
<a href=/blog/code/backend/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div><div class="col-lg-4 col-md-6 pt-2"><div class="card h-100"><div class=card-header><a href=/blog/game/mainpage/><img src=/posts/Valorant/mainPageFullReduced.jpeg class=card-img-top alt="Crafting the Main Page"></a></div><div class="card-body bg-transparent p-3 shadow-sm"><a href=/blog/game/mainpage/ class="primary-font card-title"><h5 class="card-title bg-transparent" title="Crafting the Main Page">Crafting the Main Page</h5></a><div class="card-text secondary-font"><p>Understanding Valorant Valorant&rsquo;s unique appeal is rooted in its foundational design philosophy that promotes a layered gaming experience. Players are incentivized when they successfully gather …</p></div></div><div class="mt-auto card-footer"><span class=float-start>Aug 19, 2023</span>
<a href=/blog/game/mainpage/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div><div class="col-lg-4 col-md-6 pt-2"><div class="card h-100"><div class=card-header><a href=/blog/game/introduction/><img src=/posts/League/meWithRiot.jpeg class=card-img-top alt="Valorant Website Project"></a></div><div class="card-body bg-transparent p-3 shadow-sm"><a href=/blog/game/introduction/ class="primary-font card-title"><h5 class="card-title bg-transparent" title="Valorant Website Project">Valorant Website Project</h5></a><div class="card-text secondary-font"><p>My Experience with Riot For the past 10 years, Riot Games has been the cornerstone of my gaming experience. I&rsquo;ve always enjoyed those competitive moments, playing alongside friends to clutch …</p></div></div><div class="mt-auto card-footer"><span class=float-start>Aug 15, 2023</span>
<a href=/blog/game/introduction/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div><div class="col-lg-4 col-md-6 pt-2"><div class="card h-100"><div class=card-header><a href=/blog/code/crawler/><img src=/posts/Dev/api.jpeg class=card-img-top alt="Building a Match Crawler"></a></div><div class="card-body bg-transparent p-3 shadow-sm"><a href=/blog/code/crawler/ class="primary-font card-title"><h5 class="card-title bg-transparent" title="Building a Match Crawler">Building a Match Crawler</h5></a><div class="card-text secondary-font"><p>Before I check my insights of Valorant with stats, the foremost task was to construct a robust data crawler. This pivotal first step would act as the foundation, paving the way for any meaningful …</p></div></div><div class="mt-auto card-footer"><span class=float-start>Aug 9, 2023</span>
<a href=/blog/code/crawler/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div><div class="col-lg-4 col-md-6 pt-2"><div class="card h-100"><div class=card-header><a href=/blog/game/agentparadox/><img src=/posts/League/valorant.jpeg class=card-img-top alt="Agent difficulty Paradox"></a></div><div class="card-body bg-transparent p-3 shadow-sm"><a href=/blog/game/agentparadox/ class="primary-font card-title"><h5 class="card-title bg-transparent" title="Agent difficulty Paradox">Agent difficulty Paradox</h5></a><div class="card-text secondary-font"><p>The realm of Valorant offers players numerous agents, each boasting unique abilities and strategies to win. But how do players, both new and experienced, navigate this vast selection?
With a …</p></div></div><div class="mt-auto card-footer"><span class=float-start>Jul 16, 2023</span>
<a href=/blog/game/agentparadox/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div></div></div><div class="text-center pt-2"></div><div class="container py-4"><div class="row justify-content-center"><div class="col-md-4 text-center"><div class=pb-2><a href=https://jooncode.com title="Joon Career"><img alt="Footer logo" src=/favicon/favicon.ico height=40px width=40px></a></div>&copy; 2023<div class=text-secondary></div></div></div></div></footer></div><script src=/bootstrap-5/js/bootstrap.bundle.min.js></script>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))});var tooltipTriggerList=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')),tooltipList=tooltipTriggerList.map(function(e){return new bootstrap.Tooltip(e)})</script><script src=/js/search.js></script>
<script src=/js/contact.js></script><section id=search-content class=py-2><div class=container id=search-results></div></section></body></html>